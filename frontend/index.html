<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nee-chat</title>
  <link rel="icon" href="https://i.pinimg.com/736x/af/49/ef/af49ef1744be6db97bea0801e24fa413.jpg">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
  <div id="loginScreen" class="auth-screen">
    <div class="auth-form">
      <h2>–í—Ö–æ–¥</h2>
      <input type="text" id="loginUsername" placeholder="–õ–æ–≥–∏–Ω" />
      <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" />
      <button onclick="handleLogin()">–í–æ–π—Ç–∏</button>
      <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="showRegisterForm(); return false;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
    </div>

    <div id="registerForm" class="auth-form" style="display:none;">
      <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      <input type="text" id="regName" placeholder="–í–∞—à–µ –∏–º—è" />
      <input type="text" id="regUsername" placeholder="–õ–æ–≥–∏–Ω" />
      <input type="password" id="regPassword" placeholder="–ü–∞—Ä–æ–ª—å" />
      <button onclick="handleRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
      <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="showLoginForm(); return false;">–í–æ–π—Ç–∏</a></p>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
  <div id="appScreen" class="app" style="display:none;">
    <div class="sidebar">
      <div class="profile-header" id="profileHeader" onclick="openProfileModal()">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
      <div class="chat-list" id="chatList"></div>
      <div class="settings-btn" onclick="openNewChatModal()">‚ûï –ù–æ–≤—ã–π —á–∞—Ç</div>
      <div class="settings-btn" onclick="openSettings()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
      <div class="settings-btn" onclick="logout()">üö™ –í—ã–π—Ç–∏</div>
    </div>

  <div class="main" id="main" ondrop="onDrop(event)" ondragover="onDragOver(event)" ondragleave="onDragLeave(event)">
    <div class="chat-header">
      <button class="back-btn" id="backToChats" onclick="backToChats()" style="display:none;">‚Üê</button>
      <span id="chatHeader">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</span>
    </div>
    <div id="typingIndicator" class="typing-indicator">–°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –ø–µ—á–∞—Ç–∞–µ—Ç‚Ä¶</div>
    <div class="messages" id="messages"></div>
    <div class="input-area">
      <input type="text" id="messageInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." />
      <label class="attach-btn" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
        üìé
        <input type="file" id="fileInput" accept="image/*" onchange="handleFileSelect(event)" />
      </label>
      <button onclick="sendMessage()">‚û§</button>
    </div>
  </div>

    <!-- –ú–æ–¥–∞–ª–∫–∏ -->
    <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
    <div class="modal" id="profileModal">
      <div class="modal-content">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h3>
        <label>
          –ò–º—è
          <input type="text" id="profileName" placeholder="–í–∞—à–µ –∏–º—è" />
        </label>
        <label>
          –ê–≤–∞—Ç–∞—Ä (—ç–º–æ–¥–∑–∏ –∏–ª–∏ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
          <input type="url" id="profileAvatar" placeholder="https://example.com/avatar.jpg –∏–ª–∏ üë§" />
        </label>
        <button onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="secondary" onclick="closeModal('profileModal')">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div class="modal" id="settingsModal">
      <div class="modal-content">
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
        <label>
          <input type="checkbox" id="notifCheck" /> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        </label>
        <label>
          –¢–µ–º–∞
          <select id="themeSelect">
            <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
            <option value="dark">–¢—ë–º–Ω–∞—è</option>
          </select>
        </label>
        <button onclick="saveSettings()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        <button class="secondary" onclick="closeModal('settingsModal')">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
    <!-- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ -->
    <div class="modal" id="newChatModal">
      <div class="modal-content">
        <h3>–ù–æ–≤—ã–π —á–∞—Ç</h3>
        <div id="usersList"></div>
        <button class="secondary" onclick="closeModal('newChatModal')">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <div class="image-viewer-modal" id="imageModal" onclick="closeImageModal()">
      <div class="image-viewer-content" onclick="event.stopPropagation()">
        <img id="fullImage" src="" alt="...">
        <div class="image-info" id="imageInfo"></div>
      </div>
      <button class="image-viewer-close" onclick="closeImageModal()">‚úï</button>
      <button class="image-viewer-nav" id="modalPrevBtn" onclick="showPrevImage(event)">‚Äπ</button>
      <button class="image-viewer-nav" id="modalNextBtn" onclick="showNextImage(event)">‚Ä∫</button>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π -->
    <div class="modal" id="attachmentsModal">
      <div class="modal-content">
        <h3>–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã</h3>
        <div id="attachmentsGrid" class="attachments-grid"></div>
        <button class="secondary" onclick="closeModal('attachmentsModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
</body>
</html>